<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="style.css" />
    <title>MARS Home</title>
    <style>
      table, th, td {
      border: 1px solid gray;
      padding: 5px;
      text-align:left
      }
      table {
      border-spacing: 0px;
      }
      .tada {
      background-color: rgba(255,255,0,0.3);
      }
      .testing {
      background-color: rgba(0,0,255,0.1);
      }
</style>
</head>
<body>
  <h3>Key MARS apps</h3>

  <p>
    <em>
      The only <span class="tada">service used by normal TADA</span>
      is <code>/schedule/propid/TELESCOPE/DATE</code>.  For <span class="testing">TADA testing</span>
      some of the <code>/provisional/</code> services are used also.
    </em>
  </p>

  <table>
    <tr>
      <th><a href="{% url 'admin:index' %}">/admin/</a></th>
      <td>Change data.</td>
    </tr>
    <tr>
      <th><a href="{% url 'admin:index' %}provisional/fitsname/add/">/admin/provisional/fitsname/add/</a></th>
      <td>Record FITS file as provisional.</td>
    </tr>
    <tr>
      <th><a href="{% url 'admin:index' %}schedule/slot/">/admin/schedule/slot/</a></th>
      <td>Edit schedule.</td>
    </tr>
    
    <tr>
      <th><a href="{% url 'schedule:list' %}">/schedule/</a></th>
      <td>List the schedule.</td>
    </tr>
    <!--
    <tr>
      <th>/schedule/scrape/BEGIN_YYYYMMDD/END_YYYYMMDD/</th>
      <th>Load schedule for range of dates.</th>
    </tr>
    -->
    <tr class="tada">
      <th>
	<a href="{% url 'schedule:getpropid' 'kp4m' '2014-01-01' %}">
	  /schedule/propid/TELESCOPE/DATE
	</a>
      </th>
      <td>Get propid given telescope and observation date.</td>
    </tr>
    <tr>
      <th><a href="{% url 'schedule:month_list' '2015' 'aug' %}">/schedule/2015/aug/</a></th>
      <td>Get a months worth.</td>
    </tr>
    <tr>
      <th><a href="{% url 'schedule:week_list' '2015' '23' %}">/schedule/2015/week/23/</a></th>
      <td>Get a weeks worth.</td>
    </tr>
    <tr>
      <th><a href="{% url 'schedule:day_list' '2015' 'aug' '23' %}">/schedule/2015/aug/23/</a></th>
      <td>Get a days worth.</td>
    </tr>
    <tr>
      <th><a href="{% url 'schedule:today_list' %}">/schedule/today/</a></th>
      <td>Get a todays schedule.</td>
    </tr>

    <tr>
      <th><a href="{% url 'schedule:upload_file' %}">/schedule/upload/</a></th>
      <td>Upload XML file of schedule data and load it.</td>
    </tr>
    

    <tr>
      <th><a href="{% url 'siap:index' %}">/siap/</a></th>
      <td>SIAP index of all files.</td>
    </tr>
    <tr>
      <th><a href="{% url 'siap:tada' %}">/siap/tada/</a></th>
      <td>List of all Archive files containing substring "TADA". Get
      different renderings based on requested content type. Examples:
      <pre>
curl -H "Content-type: application/json" 'http://localhost:8000/siap/tada/'
curl -H "Content-type: text/csv" 'http://localhost:8000/siap/tada/' >x.csv
      </pre></td>
    </tr>


    <tr>
      <th>
        <a href="{% url 'siap:filenames' '2011A-0525' %}">/siap/prop/PROPID</a>
      </th>
      <td>Filesnames associated with PROPID='2011A-0525'</td>
    </tr>


    <tr>
      {# <a href="{% url recon:index' %}">/recon/</a> #}
      <th><a href="recon:index">/recon/</a></th>
      <td><em>UNDER CONSTRUCTION!! </em>
      <br />
      Reconcile files POSTED verses INGESTED into the archive. Compare
      the list of files posted via <code>raw_post</code> from all
      domes to the list of files stored in the Noao Science Archive.</td>
    </tr>


    <tr>
      <th><a href="{% url 'provisional:index' %}">/provisional/</a></th>

      <td>List of all files stored in the Archive on a provisional basis.
        These can be deleted as a batch or individiually through
        web-services.</td>
    </tr>
    <tr class="testing">
      <th><a href="{% url 'provisional:stuff' %}">/provisional/stuff</a></th>
      <td>Insert all files matching "TADA like" reference file into
        provisional list.</td>
    </tr>
    <tr>
      <th>/provisional/delete/REF_FILENAME/</th>
      <td><strong>Delete a file from Archive</strong> and the
        provisional list.</td>
    </tr>
    <tr class="testing">
      <th><a href="{% url 'provisional:rollback' %}">/provisional/rollback</a></th>
      <td><strong>Delete all files that in provisional list from
          Archive</strong> and the provisional list.</td>
    </tr>
    <tr  class="testing">
      <th>/provisional/add/REF_FILENAME/?source=SOURCE_FILENAME</th>
      <td>{% comment %}
        <a href="{% url 'provisional:index'%}add/ref999/?source=src999">
        </a>
        {% endcomment %}
        <br />
        Add a file to list of provisional files. Overwrites previous
        REF_FILENAME if it exists.
        can use as in:
        <br />
        <pre>
          fname=/data/scraped/mtn_raw/ct15m-echelle/chi141225.1273.fits
          curl "http://localhost:8000/provisional/add/ref5/?source=$fname"
        </pre>
      </td>
    </tr>


    <tr>
      <th><a href="docs">/docs/</a></th>
      <td><em>UNDER CONSTRUCTION!! </em>
      <br />
      Web-service API automatically generated documentation.</td>
    </tr>
    <tr>
      <th><a href="api">/api/</a></th>
      <td>Django REST framework auto generated API pages</td>
    </tr>

  </table>

  
</body>
</html>
